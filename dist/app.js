!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=7)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(6);Object.defineProperty(e,"Component",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11);Object.defineProperty(e,"AUTH_SERVICE",{enumerable:!0,get:function(){return r.AUTH_SERVICE}});var a=n(12);Object.defineProperty(e,"API_SERVICE",{enumerable:!0,get:function(){return a.API_SERVICE}});var o=n(21);Object.defineProperty(e,"PIZZA_SERVICE",{enumerable:!0,get:function(){return o.PIZZA_SERVICE}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.getTime=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,e=t.getSeconds().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return t.getHours().toString().padStart(2,"0")+":"+n+":"+e},e.parseHTML=function(t){var e=document.createElement("template");return e.innerHTML=t.trim(),e.content},e.insertChildren=function(t,e){return"string"==typeof e?t.insertAdjacentHTML("beforeend",e):Array.isArray(e)?e.forEach(function(e){"string"==typeof e?t.insertAdjacentHTML("beforeend",e):t.append(e)}):t.append(e),t},e.status=function(t){if(t.ok||400===t.status)return t;throw console.log("response:",t),new Error(t.statusText)},e.json=function(t){return t.json()},e.parseJwtClaims=function(t){var e=t.split(".")[1],n=e.replace("-","+").replace("_","/");return JSON.parse(window.atob(n))},e.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},e.getRandomFloat=function(t,e){return Math.random()*(e-t)+t},e.getCanvasAsFile=function(t){return new Promise(function(e,n){t.toBlob(e)})}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(13);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(26);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(40);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),i=function(){function t(e){r(this,t),this.props=e||{},this.state={},this.host=null,this.updateState=this.updateState.bind(this)}return a(t,[{key:"componentsStateWillUpdate",value:function(t){}},{key:"updateState",value:function(t){return this.componentsStateWillUpdate(t),this.state=Object.assign({},this.state,t),this._render(),this.state}},{key:"update",value:function(t){return this.beforeUpdate(t),this.props=t,this._render()}},{key:"beforeUpdate",value:function(){}},{key:"_render",value:function(){var t=this.render();return this.host.innerHTML="",(0,o.insertChildren)(this.host,t)}},{key:"render",value:function(){}}]),t}();e.default=i},function(t,e,n){t.exports=n(8)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}n(9);var a=n(10),o=r(a),i=n(54),u=r(i),s=new u.default(o.default);document.getElementById("root").appendChild(s.host)},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=n(22),i=r(o),u=n(28),s=r(u),c=n(42),l=r(c),f=n(46),p=r(f),d=n(50),h=r(d);e.default=[{href:"",redirectTo:"/"},{href:"/",Component:i.default,canActivate:a.AUTH_SERVICE.isAuthorized},{href:"/login",Component:l.default},{href:"/register",Component:p.default},{href:"/user",Component:h.default,canActivate:a.AUTH_SERVICE.isAuthorized},{href:"/create",Component:s.default,canActivate:a.AUTH_SERVICE.isAuthorized},{href:"/logout",onEnter:function(t){a.AUTH_SERVICE.logout(),t("/")}}]},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.AUTH_SERVICE=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),i=n(1),u=function(){function t(){r(this,t),this._token=localStorage.getItem("token")||null,this._claims=JSON.parse(localStorage.getItem("claims"))||null,this.isAuthorized=this.isAuthorized.bind(this)}return a(t,[{key:"isAuthorized",value:function(){return this.tokenIsNotExpired()}},{key:"tokenIsNotExpired",value:function(){return!!this.token&&this.claims.exp>Date.now()/1e3}},{key:"logout",value:function(){this._token=null,localStorage.removeItem("token"),this._claims=null,localStorage.removeItem("claims")}},{key:"login",value:function(t){var e=this;return i.API_SERVICE.loginUser(t).then(function(t){var n=t.success,r=t.token;return n?(e.token=r,e.claims=(0,o.parseJwtClaims)(r),{success:n}):t})}},{key:"token",set:function(t){this._token=t,localStorage.setItem("token",t)},get:function(){return this._token}},{key:"claims",set:function(t){this._claims=t,localStorage.setItem("claims",JSON.stringify(t))},get:function(){return this._claims}},{key:"username",get:function(){if(this.isAuthorized())return this.claims.username}}]),t}();e.AUTH_SERVICE=new u},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.API_SERVICE=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),i=n(1),u=n(3),s=(function(t){t&&t.__esModule}(u),function(){function t(){r(this,t),this.DOMAIN="https://pizza-tele.ga",this.BASE_API_URL=this.DOMAIN+"/api/v1",this.END_POINTS={storeList:"/store/list",userCreate:"/user/create",userLogin:"/user/login",userInfo:"/user/my_info",ingredientList:"/ingredient/list",tagList:"/tag/list",pizzaCreate:"/pizza/create",pizzaList:"/pizza/list\t"}}return a(t,[{key:"getStoreList",value:function(){return this.get(this.END_POINTS.storeList)}},{key:"getUserInfo",value:function(){return this.get(this.END_POINTS.userInfo,i.AUTH_SERVICE.token)}},{key:"getPizzas",value:function(){return this.get(this.END_POINTS.pizzaList,i.AUTH_SERVICE.token)}},{key:"getIngredientList",value:function(){return this.get(this.END_POINTS.ingredientList,i.AUTH_SERVICE.token)}},{key:"getTagList",value:function(){return this.get(this.END_POINTS.tagList,i.AUTH_SERVICE.token)}},{key:"createPizza",value:function(t){return this.post(this.END_POINTS.pizzaCreate,t,i.AUTH_SERVICE.token)}},{key:"loginUser",value:function(t){return this.post(this.END_POINTS.userLogin,JSON.stringify(t))}},{key:"createUser",value:function(t){return this.post(this.END_POINTS.userCreate,JSON.stringify(t))}},{key:"get",value:function(t,e){var n=new Headers({accept:"application/json"});return e&&n.append("Authorization","Bearer "+e),fetch(this.BASE_API_URL+t,{headers:n}).then(o.status).then(o.json).catch(console.error)}},{key:"post",value:function(t,e,n){var r=new Headers;return n&&r.append("Authorization","Bearer "+n),fetch(this.BASE_API_URL+t,{method:"POST",body:e,headers:r}).then(o.status).then(o.json).catch(console.error)}}]),t}());e.API_SERVICE=new s},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(14);var s=n(2),c=n(0),l=n(15),f=r(l),p=n(18),d=r(p),h=function(t){function e(t){a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("header__container"),n.clock=new f.default,n.authButtons=new d.default,n}return i(e,t),u(e,[{key:"render",value:function(){var t=(0,s.parseHTML)('\n\t\t\t<header class="header">\n\t\t\t\t<div class="header__time" id="time">\n\t\t\t\t</div>\n\t\t\t\t<div class="header__logo">\n\t\t\t\t\t<a href="#/">\n\t\t\t\t\t\t<img class="logo__img" src="img/pizza-logo.png"\n\t\t\t\t\t\t\talt="Pizza app logo">\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div class="header__auth" id="buttons">\n\t\t\t\t</div>\n\t\t\t</header>\n\t\t');return t.getElementById("time").append(this.clock.update()),t.getElementById("buttons").append(this.authButtons.update()),t}}]),e}(c.Component);e.default=h},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(16);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(17);var u=n(2),s=n(0),c=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={currentTime:(0,u.getTime)()},n.host=document.createElement("div"),n.host.classList.add("clock__container"),setInterval(function(){var t=(0,u.getTime)();n.updateState({currentTime:t})},1e3),n}return o(e,t),i(e,[{key:"render",value:function(){return'\n\t\t\t<i class="fa fa-clock-o"></i>\n\t\t\t<time class="time__current-time" id="current-time">\n\t\t\t\t'+this.state.currentTime+"\n\t\t\t</time>\n\t\t"}}]),e}(s.Component);e.default=c},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(19);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(20);var u=n(1),s=n(0),c=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={userName:null},n.host=document.createElement("div"),n.host.classList.add("auth__container"),n.getAuthData(),n}return o(e,t),i(e,[{key:"getAuthData",value:function(){var t=u.AUTH_SERVICE.username;this.updateState({userName:t})}},{key:"render",value:function(){var t=this.state.userName;return'\n\t<a href="'+(t?"#/user":"#/register")+'" class="button auth__button">\n\t\t<i class="fa '+(t?"fa-user":"fa-user-plus")+'"></i>\n\t\t'+(t||"Sign up")+'\n\t</a>\n\t<a href="'+(t?"#/logout":"#/login")+'" class="button auth__button">\n\t\t<i class="fa '+(t?"fa-sign-out":"fa-sign-in")+'"></i>\n\t\t'+(t?"Logout":"Login")+"\n\t</a>\n\t\t"}}]),e}(s.Component);e.default=c},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PIZZA_SERVICE=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),i=function(){function t(){r(this,t),this.ingredients=[],this.tags=[],this.images={},this.maxNumberOfIngredients=6,this.crust_pizza=o.API_SERVICE.DOMAIN+"/static/images/pizza.png"}return a(t,[{key:"preloadAllPizzaData",value:function(){var t=this;return Promise.all([this._getIngredients().then(function(){return t._loadResources()}).then(function(e){return e.forEach(function(e){return t.images[e.name]=e.image})}),this._getTags()])}},{key:"_getIngredients",value:function(){var t=this;return o.API_SERVICE.getIngredientList().then(function(e){return t.ingredients=e.results})}},{key:"_getTags",value:function(){var t=this;return o.API_SERVICE.getTagList().then(function(e){return t.tags=e.results})}},{key:"_loadResources",value:function(){var t=this,e=[];return e.push(this._loadImage("crust",this.crust_pizza)),e=e.concat(this.ingredients.map(function(e){var n=o.API_SERVICE.DOMAIN+"/"+e.image_url;return t._loadImage(e.name,n)})),Promise.all(e)}},{key:"_loadImage",value:function(t,e){return new Promise(function(n,r){var a=new Image;a.crossOrigin="Anonymous",a.src=e,a.onload=function(){return n({name:t,image:a})},a.onerror=function(t){return r(t)}})}}]),t}();e.PIZZA_SERVICE=new i},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),c=n(0),l=n(1),f=n(3),p=r(f),d=n(23),h=r(d),_=n(4),m=r(_),b=function(t){function e(t){a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("app__container"),n.header=new p.default,n.list=new h.default,n.footer=new m.default,n.main=document.createElement("main"),n.main.classList.add("main"),n.getPizzas(),n}return i(e,t),u(e,[{key:"getPizzas",value:function(){var t=this;return l.API_SERVICE.getPizzas().then(function(e){t.list.update({pizzas:e.results})})}},{key:"render",value:function(){return this.main.append((0,s.parseHTML)('\n\t\t\t<a href="#/create" class="button main__button">\n\t\t\t\t+ Add new pizza\n\t\t\t</a>\n\t\t'),this.list.update()),[this.header.update(),this.main,this.footer.update()]}}]),e}(c.Component);e.default=b},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(24);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(25);var u=n(0),s=n(1),c=n(2),l=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("list__container"),n}return o(e,t),i(e,[{key:"render",value:function(){if(!this.props)return'\n\t\t\t<p class="message--success">\n\t\t\t\tLoading...\n\t\t\t</p>';var t=this.props.pizzas;return console.log("pizzas: ",t),t.length?t.reduce(function(t,e,n){var r=(new Date(e.time_prepared)-Date.now())/6e4;return t+='\n\t\t\t\t<article class="list__item">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc="'+s.API_SERVICE.DOMAIN+"/"+e.img_url+'" \n\t\t\t\t\t\talt="pizza" \n\t\t\t\t\t\tclass="item__pic" \n\t\t\t\t\t\tcrossOrigin\n\t\t\t\t\t>\n\t\t\t\t\t<time class="item__order-time">\n\t\t\t\t\t\t'+(0,c.getTime)(new Date(e.created_date))+'\n\t\t\t\t\t</time >\n\t\t\t\t\t<h3 class="item__number-in-queue">\n\t\t\t\t\t\t#'+(n+1)+'\n\t\t\t\t\t</h3>\n\t\t\t\t\t<time\n\t\t\t\t\t\tdatetime="PT'+Math.floor(r)+'M"\n\t\t\t\t\t\tclass="item__eta">\n\t\t\t\t\t\t\tETA: '+Math.floor(r)+' min\n\t\t\t\t\t</time>\n\t\t\t\t\t<span class="item__price">\n\t\t\t\t\t\t$'+e.price.toFixed(2)+"\n\t\t\t\t\t</span>\n\t\t\t\t</article >\n\t\t\t"},""):'\n\t\t\t<p class="message--success">\n\t\t\t\tPizza queue is empty\n\t\t\t</p>\n\t\t'}}]),e}(u.Component);e.default=l},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(27);var u=n(0),s=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("footer__container"),n}return o(e,t),i(e,[{key:"render",value:function(){return'\n\t\t\t<footer class="footer">\n\t\t\t\t<address class="footer__address">\n\t\t\t\t\tKottans, Kottans Str. 1,\n\t\t\t\t\t<a href="tel:5778887">tel. 57-788-87</a>\n\t\t\t\t</address>\n\t\t\t\t<span class="footer__copyright">Pizza Manager &copy; 2018</span>\n\t\t\t</footer>\n\t\t'}}]),e}(u.Component);e.default=s},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(2),c=n(0),l=n(1),f=n(3),p=r(f),d=n(29),h=r(d),_=n(34),m=r(_),b=n(4),y=r(b),v=n(5),g=r(v),w=function(t){function e(t){a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("create__container"),n.header=new p.default,n.canvas=new h.default,n.createPizza=new m.default,n.footer=new y.default,n.message=new g.default,n.main=document.createElement("main"),n.main.classList.add("main","main--create"),n.onFormChange=n.onFormChange.bind(n),n.onFormSubmit=n.onFormSubmit.bind(n),n}return i(e,t),u(e,[{key:"onFormChange",value:function(t,e,n){this.canvas.update({ingredients:t,size:e,maxSize:n})}},{key:"onFormSubmit",value:function(t){var e=this,n=document.getElementById("canvas");(0,s.getCanvasAsFile)(n).then(function(e){return t.append("image",e),l.API_SERVICE.createPizza(t)}).then(function(t){t.success?(e.message.update({response:t}),setTimeout(function(){window.location.hash="/"},1e3)):e.message.update({response:t})}).catch(console.error)}},{key:"beforeUpdate",value:function(){var t=this;l.PIZZA_SERVICE.preloadAllPizzaData().then(function(){var e=l.PIZZA_SERVICE.ingredients,n=l.PIZZA_SERVICE.tags,r=l.PIZZA_SERVICE.images,a=l.PIZZA_SERVICE.maxNumberOfIngredients;t.main.append(t.canvas.update()),t.main.append(t.createPizza.update({ingredients:e,tags:n,images:r,maxNumberOfIngredients:a,onChange:t.onFormChange,onSubmit:t.onFormSubmit}))})}},{key:"render",value:function(){return this.main.append((0,s.parseHTML)('\n\t\t\t<h2 class="main__heading">Create and order your pizza!</h2>\n\t\t\t')),[this.header.update(),this.main,this.message.update(),this.footer.update()]}}]),e}(c.Component);e.default=w},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(30);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(31);var u=n(32),s=n(33),c=n(1),l=n(0),f=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.host=document.createElement("div"),n.host.classList.add("canvas__container"),n.canvas=document.createElement("canvas"),n.canvas.id="canvas",n.ctx=n.canvas.getContext("2d"),n.canvas.width=320,n.canvas.height=320;var o=c.PIZZA_SERVICE.maxNumberOfIngredients;return n.cellularMap=new s.CellularMap(255,20,o,5),n.offsetX=(n.canvas.width-n.cellularMap.diameter)/2,n.offsetY=(n.canvas.height-n.cellularMap.diameter)/2,n}return o(e,t),i(e,[{key:"_clearCanvas",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},{key:"_drawCrust",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;new u.Sprite(c.PIZZA_SERVICE.images.crust,160,160,310*t/e,310*t/e).draw(this.ctx)}},{key:"_drawIngredients",value:function(){var t=this;this.cellularMap.map.forEach(function(e){if(!e.hidden&&e.ingredient){new u.Sprite(c.PIZZA_SERVICE.images[e.ingredient],e.x+t.offsetX,e.y+t.offsetY,17,17,e.angle).draw(t.ctx)}})}},{key:"render",value:function(){if(this._clearCanvas(),!this.props)return this._drawCrust(),this.canvas;var t=this.props,e=t.ingredients,n=t.size,r=t.maxSize;return this.cellularMap.spread(e),this.cellularMap.hideExcessCells(n/r),this._drawCrust(n,r),this._drawIngredients(),this.canvas}}]),e}(l.Component);e.default=f},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.Sprite=function(){function t(e,n,a,o,i,u){r(this,t),this.x=null,this.y=null,this.angle=u,this.image=e,this.width=o||this.image.width,this.height=i||this.image.height,this.cx=n||0,this.cy=a||0}return a(t,[{key:"draw",value:function(t){if(!this.angle)return t.drawImage(this.image,this.x,this.y,this.width,this.height);t.save(),t.translate(this.x+this.width/2,this.y+this.height/2),t.rotate(this.angle),t.drawImage(this.image,-this.width/2,-this.height/2,this.width,this.height),t.restore()}},{key:"cx",set:function(t){this.x=Math.round(t-this.width/2)},get:function(){return Math.round(this.width/2)}},{key:"cy",set:function(t){this.y=Math.round(t-this.height/2)},get:function(){return Math.round(this.height/2)}}]),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.CellularMap=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2);e.CellularMap=function(){function t(e,n,a,o){r(this,t),this.diameter=e,this.cellSize=n,this.dx=3*n/Math.sqrt(3)/2,this.dy=n/2,this.amplitude=o,this.map=this._createMap(),this.maxNumberOfIngredients=a,this.maxNumberOfCopies=Math.floor(this.map.length/this.maxNumberOfIngredients),this.ingredients=[]}return a(t,[{key:"_createMap",value:function(){for(var t=this,e=[],n=0,r=0,a=0,i=0,u=0;r<=this.diameter;){for(i<r&&(i=r);n<=this.diameter;)a<n&&(a=n),e.push({x:Math.round(n),y:Math.round(r),ingredient:null,hidden:!1,angle:(0,o.getRandomFloat)(0,2*Math.PI)}),n+=2*this.dx;u++,r=u*this.dy,n=u%2?this.dx:0}this.diameter=Math.max(a,i);var s=e.filter(function(e){return Math.pow(t.diameter/2-e.x,2)+Math.pow(t.diameter/2-e.y,2)<=Math.pow(t.diameter/2,2)});return this.amplitude?s.map(function(e){return e.x+=(0,o.getRandomInt)(-t.amplitude,t.amplitude),e.y+=(0,o.getRandomInt)(-t.amplitude,t.amplitude),e}):s}},{key:"spread",value:function(t){var e=this;t.length>this.maxNumberOfIngredients||(this._removeMissingIngredients(t),t.forEach(function(t){if(!e.ingredients.includes(t))for(var n=e.maxNumberOfCopies;n--;){var r=e.map.reduce(function(t,e,n){return e.ingredient||t.push(n),t},[]),a=r[Math.floor(Math.random()*r.length)];e.map[a].ingredient=t}}),this.ingredients=t)}},{key:"_removeMissingIngredients",value:function(t){var e=this;this.ingredients.filter(function(e){return!t.includes(e)}).forEach(function(t){e.map.forEach(function(e){e.ingredient===t&&(e.ingredient=null)})})}},{key:"hideExcessCells",value:function(t){for(var e=this.diameter/2,n=this.map.length-1;n>=0;n--){var r=this.map[n],a=Math.pow(e-r.x,2)+Math.pow(e-r.y,2);r.hidden=a>Math.pow(e*t,2)}}}]),t}()},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(35);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(36);var s=n(2),c=n(0),l=n(1),f=n(37),p=r(f),d=n(5),h=(r(d),function(t){function e(t){a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("pizza__container"),n.ingredientInputs=null,n.sizeInputs=null,n.handleFormChange=n.handleFormChange.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.host.addEventListener("change",n.handleFormChange),n.host.addEventListener("submit",n.handleSubmit),n.total=new p.default,n}return i(e,t),u(e,[{key:"shadeIngredients",value:function(){this.ingredientInputs.forEach(function(t){t.checked||t.nextElementSibling.classList.add("js-shadowed")})}},{key:"restoreIngredients",value:function(){this.ingredientInputs.forEach(function(t){t.nextElementSibling.classList.remove("js-shadowed")})}},{key:"handleFormChange",value:function(t){var e=this.props.maxNumberOfIngredients;if(t.target.matches("[data-canvas]")){var n=[];if(this.ingredientInputs.forEach(function(t){t.checked&&n.push(t.dataset.ingredient)}),n.length>e-1?this.shadeIngredients():this.restoreIngredients(),n.length>e){t.target.checked=!1;var r=n.indexOf(t.target.dataset.ingredient);n.splice(r,1)}var a=void 0,o=0;this.sizeInputs.forEach(function(t){t.value>o&&(o=+t.value),t.checked&&(a=+t.value)}),this.props.onChange(n,a,o),this._updateTotal(n,a)}}},{key:"_updateTotal",value:function(t,e){var n=this.props.ingredients;this.total.update({ingredients:n,checkedIngredients:t,size:e})}},{key:"handleSubmit",value:function(t){t.preventDefault();var e=new FormData(this.form),n=[],r=[];e.getAll?(n=e.getAll("tag").map(Number),r=e.getAll("ingredient").map(Number),e.delete("tag"),e.delete("ingredient")):(this.tagsInputs.forEach(function(t){t.checked&&n.push(+t.value)}),this.ingredientInputs.forEach(function(t){t.checked&&r.push(+t.value)})),e.append("tags",JSON.stringify(n)),e.append("ingredients",JSON.stringify(r)),this.props.onSubmit(e)}},{key:"render",value:function(){var t=this.props,e=t.ingredients,n=t.tags,r=(t.images,'\n\t<form class="create-pizza__form" method="post" id="create-pizza__form">\n\t\t<label for="pizza-name">Pizza name:</label>\n\t\t<input type="text" class="create-pizza__input-text" name="name" \n\t\t\tid="pizza-name" required min="3" max="24">\n\n\t\t<fieldset>\n\t\t\t<legend class="create-pizza__legend">Pizza size:</legend>\n\t\t\t<div class="create-pizza__fieldset-inner">\n\t\t\t\t<label class="create-pizza__radio-label">\n\t\t\t\t\t<input class="create-pizza__radio" type="radio" name="size"\n\t\t\t\t\t\tvalue="30" required data-canvas data-size>\n\t\t\t\t\t<span class="create-pizza__radio-span">Ø30 cm</span>\n\t\t\t\t</label>\n\t\t\t\t<label class="create-pizza__radio-label">\n\t\t\t\t\t<input class="create-pizza__radio" type="radio" name="size"\n\t\t\t\t\t\tvalue="45" required data-canvas data-size>\n\t\t\t\t\t<span class="create-pizza__radio-span">Ø45 cm</span>\n\t\t\t\t</label>\n\t\t\t\t<label class="create-pizza__radio-label">\n\t\t\t\t\t<input class="create-pizza__radio" type="radio" name="size"\n\t\t\t\t\t\tvalue="60" checked data-canvas data-size>\n\t\t\t\t\t<span class="create-pizza__radio-span">Ø60 cm</span>\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t</fieldset>\n\n\t\t<label for="pizza-description">Description:</label>\n\t\t<textarea class="create-pizza__input-text" name="description"\n\t\t\tid="pizza-description"></textarea>\n\t\t\n\t\t<fieldset>\n\t\t\t<legend class="create-pizza__legend">Ingredients:</legend>\n\t\t\t<div class="create-pizza__fieldset-inner">\n\t\t\t'+e.reduce(function(t,e){return t+='\n\t\t\t\t\t<label class="create-pizza__checkbox-label">\n\t\t\t\t\t\t<input class="create-pizza__checkbox"\n\t\t\t\t\t\t\ttype="checkbox" name="ingredient"\n\t\t\t\t\t\t\tvalue="'+e.id+'" data-canvas \n\t\t\t\t\t\t\t\tdata-ingredient="'+e.name+'">\n\t\t\t\t\t\t<span class="create-pizza__checkbox-span \n\t\t\t\t\t\t\tcreate-pizza__checkbox-span--ingredient">\n\t\t\t\t\t\t\t'+e.name+'\n\t\t\t\t\t\t\t<img src="'+l.API_SERVICE.DOMAIN+"/\n\t\t\t\t\t\t\t\t"+e.image_url+'" \n\t\t\t\t\t\t\t\tclass="create-pizza__span-image" crossOrigin>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t'},"")+'\n\t\t\t</div>\n\t\t</fieldset>\n\t\n\t\t<fieldset>\n\t\t\t<legend class="create-pizza__legend">Tags:</legend>\n\t\t\t<div class="create-pizza__fieldset-inner">\n\t\t\t\t'+n.reduce(function(t,e){return t+='\n\t\t\t\t\t<label class="create-pizza__checkbox-label">\n\t\t\t\t\t\t<input class="create-pizza__checkbox" type="checkbox"\n\t\t\t\t\t\t\tname="tag" value="'+e.id+'"\n\t\t\t\t\t\t\tdata-tag>\n\t\t\t\t\t\t<span class="create-pizza__checkbox-span">\n\t\t\t\t\t\t\t'+e.name+"\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</label>\n\t\t\t\t"},"")+'\n\t\t\t</div>\n\t\t</fieldset>\n\n\t\t<article id="total"></article>\n\t\n\t\t<div class="create-pizza__button-wrapper">\n\t\t\t<a \n\t\t\t\thref="#/"\n\t\t\t\tclass="button create-pizza__button \n\t\t\t\t\tcreate-pizza__button--reset" \n\t\t\t>Cancel</a>\n\t\t\t<input \n\t\t\t\ttype="submit" \n\t\t\t\tclass="button create-pizza__button \n\t\t\t\t\tcreate-pizza__button--submit" \n\t\t\t\tvalue="Order Pizza"\n\t\t\t>\n\t\t</div>\n\t</form>\n\t\t'),a=(0,s.parseHTML)(r);return this.form=a.getElementById("create-pizza__form"),this.ingredientInputs=a.querySelectorAll("[data-ingredient]"),this.tagsInputs=a.querySelectorAll("[data-tag]"),this.sizeInputs=a.querySelectorAll("[data-size]"),a.getElementById("total").append(this.total.update()),a}}]),e}(c.Component));e.default=h},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(38);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(39);var u=n(0),s=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("total__container"),n}return o(e,t),i(e,[{key:"_calcPrice",value:function(t,e,n){return t.filter(function(t){return e.includes(t.name)}).reduce(function(t,e){return t+e.price},n/5).toFixed(2)}},{key:"render",value:function(){var t="0.00";if(this.props){var e=this.props,n=e.ingredients,r=e.checkedIngredients,a=e.size;t=this._calcPrice(n,r,a)}return'\n\t\t\t<h3 class="total__heading">Total price:</h3>\n\t\t\t<span class="total__price">$ '+t+"<span>\n\t\t"}}]),e}(u.Component);e.default=s},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(41);var u=n(0),s=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("message__container"),n}return o(e,t),i(e,[{key:"render",value:function(){if(!this.props)return"";var t=this.props.response,e=t.success,n=t.error,r=t.validations;return e?'<p class="message--success">Success! Redirecting...</p>':r?'\n\t\t\t\t<p class="message--error">'+n+':</p>\n\t\t\t\t<ul class="message__validations">\n\t\t\t\t\t'+r.map(function(t){return"<li>"+t+"</li>"}).join("")+"\n\t\t\t\t</ul>\n\t\t\t":'<p class="message--error">'+n+":</p>"}}]),e}(u.Component);e.default=s},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),c=n(3),l=r(c),f=n(43),p=r(f),d=n(4),h=r(d),_=function(t){function e(t){a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("login__container"),n.header=new l.default,n.loginForm=new p.default,n.footer=new h.default,n.main=document.createElement("main"),n.main.classList.add("main"),n}return i(e,t),u(e,[{key:"render",value:function(){return this.main.append(this.loginForm.update()),[this.header.update(),this.main,this.footer.update()]}}]),e}(s.Component);e.default=_},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(44);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(45);var u=n(0),s=n(1),c=n(5),l=function(t){return t&&t.__esModule?t:{default:t}}(c),f=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("login-form__container"),n.host.addEventListener("submit",function(t){return n.handleSubmit(t)}),n.message=new l.default,n}return o(e,t),i(e,[{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var n={username:t.target.username.value,password:t.target.password.value};s.AUTH_SERVICE.login(n).then(function(t){t.success?(e.message.update({response:t}),setTimeout(function(){window.location.hash="/user"},1e3)):e.message.update({response:t})}).catch(console.error)}},{key:"render",value:function(){return['\n<form class="login-form" method="post">\n\t<label for="username">Username:</label>\n\t<input type="text" class="login-form__name" name="username" id="username" required>\n\t<label for="password">Password:</label>\n\t<input type="password" class="login-form__password" name="password"\n\t\tid="password" required>\n\t<div class="login-form__button-wrapper">\n\t\t<input type="submit" class="button login-form__button button--sign-in"\n\t\t\tvalue="Login">\n\t\t<a href="#/register" class="button login-form__button button--sign-up">\n\t\t\tSign up\n\t\t</a>\n\t</div>\n</form>\n\t\t',this.message.update()]}}]),e}(u.Component);e.default=f},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),c=n(3),l=r(c),f=n(47),p=r(f),d=n(4),h=r(d),_=function(t){function e(t){a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("register__container"),n.header=new l.default,n.registerForm=new p.default,n.footer=new h.default,n.main=document.createElement("main"),n.main.classList.add("main"),n}return i(e,t),u(e,[{key:"render",value:function(){return this.main.append(this.registerForm.update()),[this.header.update(),this.main,this.footer.update()]}}]),e}(s.Component);e.default=_},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(48);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(49);var u=n(0),s=n(1),c=n(5),l=function(t){return t&&t.__esModule?t:{default:t}}(c),f=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={stores:[]},n.host=document.createElement("div"),n.host.classList.add("login-form__container"),n.host.addEventListener("submit",function(t){return n.handleSubmit(t)}),n.message=new l.default,n.getStores(),n}return o(e,t),i(e,[{key:"getStores",value:function(){var t=this;return s.API_SERVICE.getStoreList().then(function(e){return t.updateState({stores:e})})}},{key:"handleSubmit",value:function(t){var e=this;t.preventDefault();var n={username:t.target.username.value,password:t.target.password.value,password_repeat:t.target.password_repeat.value,email:t.target.email.value,store_id:+t.target.store_id.value,store_password:t.target.store_password.value};return s.API_SERVICE.createUser(n).then(function(t){t.success?(e.message.update({response:t}),setTimeout(function(){window.location.hash="/login"},1e3)):e.message.update({response:t})}).catch(console.error)}},{key:"render",value:function(){return['\n<form class="register-form" method="post">\n\t<label for="username">Username:</label>\n\t<input type="text" class="register-form__name" name="username" id="username" required>\n\t<label for="email">Email:</label>\n\t<input type="email" class="register-form__email" name="email" id="email" required>\n\t<label for="password">Password:</label>\n\t<input type="password" class="register-form__password" name="password"\n\t\tid="password" required>\n\t<label for="password_repeat">Confirm password:</label>\n\t<input type="password" class="register-form__password" name="password_repeat"\n\t\tid="password_repeat" required>\n\t<label for="store_id">Choose your store:</label>\n\t<select class="register-form__store_id" name="store_id"\n\t\tid="store_id" required>\n\t\t'+this.state.stores.map(function(t){var e="";return 2==t.id&&(e="selected"),'<option value="'+t.id+'" '+e+">"+t.name+"</option>"}).join("")+'\n\t</select>\n\t<label for="store_password">Store password:</label>\n\t<input type="password" class="register-form__store_password" name="store_password"\n\t\tid="store_password" required>\n\t<input type="submit" class="button register-form__button button--register"\n\t\tvalue="Sign up">\n</form>\n\t\t',this.message.update()]}}]),e}(u.Component);e.default=f},function(t,e){},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(0),c=n(3),l=r(c),f=n(51),p=r(f),d=n(4),h=r(d),_=n(1),m=function(t){function e(t){a(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={userData:null},n.host=document.createElement("div"),n.host.classList.add("user__container"),n.header=new l.default,n.userInfo=new p.default,n.footer=new h.default,n.main=document.createElement("main"),n.main.classList.add("main"),n.getUserData(),n}return i(e,t),u(e,[{key:"getUserData",value:function(){var t=this;return _.API_SERVICE.getUserInfo().then(function(e){return t.updateState({userData:e})})}},{key:"render",value:function(){var t=this.state.userData;return this.main.append(this.userInfo.update({userData:t})),[this.header.update(),this.main,this.footer.update()]}}]),e}(s.Component);e.default=m},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(52);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r(a).default}})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(53);var u=n(2),s=n(0),c=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.host=document.createElement("div"),n.host.classList.add("user-info__container"),n}return o(e,t),i(e,[{key:"render",value:function(){var t=this.props.userData;if(!t)return"";var e=(0,u.parseHTML)('\n\t\t\t<table class="user-info__table">\n\t\t\t\t<caption>User Info</caption>\n\t\t\t\t<tbody id="table">\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t\t<div class="user-info__button-wrapper">\n\t\t\t\t<a href="#/" class="button user-info__button">Pizza List</a>\n\t\t\t\t<a href="#/logout" \n\t\t\t\t\tclass="button user-info__button button--red">\n\t\t\t\t\tLog out\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t'),n=e.getElementById("table");for(var r in t){var a=(0,u.parseHTML)("\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td>"+r+":</td>\n\t\t\t\t\t\t<td>"+t[r]+"</td>\n\t\t\t\t\t</tr>\n\t\t\t\t");n.append(a)}return e}}]),e}(s.Component);e.default=c},function(t,e){},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(6),s=function(t){return t&&t.__esModule?t:{default:t}}(u),c=function(t){function e(t){r(this,e);var n=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={activeRoute:null,activeComponent:null,routes:t},n.host=document.createElement("div"),n.host.classList.add("router__container"),window.addEventListener("hashchange",function(){n.handleUrlChange(n.path)}),n.handleRedirect=n.handleRedirect.bind(n),n.applyRoute=n.applyRoute.bind(n),n.handleUrlChange(n.path),n}return o(e,t),i(e,[{key:"handleUrlChange",value:function(t){var e=this.state.routes,n=e.find(function(e){return e.href===t});return n.redirectTo?this.handleRedirect(n.redirectTo):n.canActivate&&!n.canActivate()?this.navigateTo("/login"):n.onEnter?this.handleOnEnter(n):void this.applyRoute(n,t)}},{key:"handleRedirect",value:function(t){this.navigateTo(t)}},{key:"navigateTo",value:function(t){window.location.hash=t}},{key:"handleOnEnter",value:function(t){t.onEnter(this.handleRedirect)}},{key:"applyRoute",value:function(t,e){var n=t.Component,r=new n;this.updateState({activeRoute:t,activeComponent:r})}},{key:"render",value:function(){return this.state.activeComponent.update()}},{key:"path",get:function(){return window.location.hash.slice(1)}}]),e}(s.default);e.default=c}]);